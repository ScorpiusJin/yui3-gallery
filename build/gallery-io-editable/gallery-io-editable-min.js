YUI.add("gallery-io-editable",function(b){var a=function(c){a.superclass.constructor.apply(this,arguments);};b.mix(a,{NS:"io_editable",ATTRS:{"srcNode":{},"bodyContent":{},"ioCfg":{value:{}},"replaceContent":{value:false},"successClass":{value:"success"},"failureClass":{value:"failure"},"autohide":{value:true}}});b.extend(a,b.Plugin.Base,{ACTIVE_CLASS:"yui3-editable-active",USE_DISABLED:false,REMOVE_STATUS_DELAY:1000,previousContent:null,isActive:false,initializer:function(c){var d=this.get("host");d.on("click",this._defClickFn,this);if(this.get("autohide")===true){d.on(["focusoutside","clickoutside"],function(){if(this.isActive){this.deactivate();}},this);}},handlePost:function(g){g.preventDefault();var f=g.currentTarget;var d=f.get("action"),c={method:f.get("method")||"POST",context:this,form:{id:f,useDisabled:this.USE_DISABLED},on:{success:this._submitSuccessFn,failure:this._submitFailureFn}};b.mix(c,this.get("ioCfg"),true);b.io(d,c);},activate:function(){var e=this.get("host"),d=null;this.isActive=true;this.previousContent=e.getContent();e.addClass(this.ACTIVE_CLASS);var c=this.get("bodyContent");if(this.get("srcNode")){c=b.one(this.get("srcNode")).getContent();}e.setContent(c);d=e.one("form");if(d){this.formListener=d.on("submit",this.handlePost,this);}e.fire("editableActive");},deactivate:function(){var c=this.get("host");this.isActive=false;if(this.formListener){c.one("form").detach(this.formListener);}c.setContent(this.previousContent);this.previousContent=null;c.removeClass(this.ACTIVE_CLASS);c.fire("editableDeactive");},_defClickFn:function(c){if(this.get("host").hasClass(this.ACTIVE_CLASS)){return;}this.activate();},_submitSuccessFn:function(e,d){var c=this.get("successClass");if(c){this.get("host").addClass(c);}if(this.get("replaceContent")){this.previousContent=d.responseText;}b.later(this.REMOVE_STATUS_DELAY,this.get("host"),function(f){this.removeClass(f);},c);this.deactivate();},_submitFailureFn:function(e,d){var c=this.get("failureClass");if(c){this.get("host").addClass(c);}b.later(this.REMOVE_STATUS_DELAY,this.get("host"),function(f){this.removeClass(f);},success);}});b.namespace("Plugin").IOEditable=a;},"@VERSION@",{requires:["io-form","plugin","base","node","event","event-outside"]});